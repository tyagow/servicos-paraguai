{% load i18n %}
{% load ratings %}

<div class="row" id="comments">
    <div class="col-md-12">
        <div class="header-comentarios">
            <h3>{% trans 'Reviews & Comentários' %}</h3>
        </div>

    </div>
    <div class="col-md-12">
        <div class="body-comentarios">
            <h4>{% trans 'Dê sua nota' %}</h4>
            {% if request.user.is_autheticated %}
                {% include 'comments/comment-form.html' with form=form url=estabelecimento.get_absolute_url %}
            {% else %}
                <p class="text-center">{% trans 'Voce precisa estar logado para comentar.' %}
                    <br>
                    <a href="">{% trans 'Entre aqui.' %}</a>
                </p>
            {% endif %}
        </div>
    </div>
    {% for comment in comments %}
        <div class="col-sm-12">
            <div class="body-comentarios">
                <h3>Comentários</h3>
                <hr>
                {% include 'comments/star.html' with total=comment.get_rate %}
                <div class="comments-list">
                    <p>{{ comment.content }}</p>
                    <small> {% trans 'por' %} {{ comment.user }}</small>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
<div class="row">
    {% if comments.paginator.num_pages > 1 %}
        <ul class="pagination">
            {% with ''|center:comments.paginator.num_pages as range %}
                {% for _ in range %}
                    <li{% if forloop.counter == comments.number %} class="active"{% endif %}><a href="?page={{ forloop.counter }}">{{ forloop.counter }}</a></li>
                {% endfor %}
            {% endwith %}
        </ul>
    {% endif %}
</div>

